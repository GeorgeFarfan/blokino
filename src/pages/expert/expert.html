<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Blokino </title>
    <script src="../../../resources/libs/blockly/blockly_compressed.js"></script>
    <script src="../../../resources/libs/blockly/blocks_compressed.js"></script>
    <script src="../../../resources/libs/blockly/msg/js/es.js"></script>
    <script src="../../../resources/libs/blockly/javascript_compressed.js"></script>
    <script src="../../../resources/libs/font-awesome/js/fontawesome.min.js"></script>
    <link rel="stylesheet" href="../../../style/app.css">
</head>

<body class="body-challenges">

    <div class="container container-ide pt-5 pb-5" id="page">
        <div class="row">
            <div class="col-md-12 col-sm-12">
                <div class="row">
                    <div class="col-8 col-sm-6">
                        <div id="back-button-challenge">
                            <i class="far fa-arrow-left back_icon"></i>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="tab-content" id="pills-tabContent">
            <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                <div class="row">
                    <div class="col text-center">
                        <img class="rounded mx-auto d-block" data-src="../../images/blokino-logo.svg"
                            src="../../images/blokino-logo.svg" alt="Blokino ..." width="200" height="200">
                    </div>
                </div>
                <div class="row ide-block mt-3">
                    <div class="col col-md-12 col-sm-12 col-lg-12 col-xs-12">
                        <div class="container-loader">
                            <div id="loader"></div>
                        </div>
                        <div id="block-editor">
                            <div id="blokinoIDE" class="block-editor"></div>
                            <xml id="toolbox">
                            </xml>
                        </div>

                    </div>
                </div>

                <div class="row  justify-content-md-center  mt-3">
                    <div class="section-buttons-expert p-3">
                        <button type="button" id="show-modal-code-preview"
                            class="btn btn-lg btn-light mr-1 btn-show-code" data-toggle="tooltip" data-placement="right"
                            title="Haz click acá, para cargar un programa de Blokino."><i
                                class="far fa-code icon-link"></i>Ver
                            código</button>
                        <button type="button" id="clean-code" class="btn btn-lg btn-light mr-1 btn-clean-code"
                            data-toggle="tooltip" data-placement="right"
                            title="Haz click acá, para limpiar el espacio de trabajo.">
                            <i class="far fa-trash icon-link"></i>Borrar
                            proyecto</button>
                        <button type="button" id="download-code" class="btn btn-lg btn-light ml-1 btn-download-code-app"
                            data-toggle="tooltip" data-placement="right"
                            title="Haz click acá, para descargar el código de Blokino."><i
                                class="far fa-file-download icon-link"></i>Descargar
                            proyecto</button>
                        <button type="button" id="open-code" class="btn btn-lg btn-light mr-1 btn-open-code"
                            data-toggle="tooltip" data-placement="right"
                            title="Haz click acá, para cargar un programa de Blokino."><i
                                class="far fa-file-upload icon-link"></i>Abrir
                            proyecto</button>
                    </div>
                </div>

                <!-- Mensaje de advertencia -->
                <div class="row  justify-content-md-center code-block mt-2">
                    <div class="col col-md-8">
                        <div class="alert alert-warning alert-dismissible" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h5>
                                <strong>Aviso</strong> Si tienes muchos dispositivos conectados. No te olvides de
                                configurarlos, para poder ejecutar los programas de <strong>Blokino</strong>.
                            </h5>
                        </div>
                    </div>
                </div>

                <!-- Botones -->
                <div class="row  justify-content-md-center code-block mt-1 mb-1">
                    <button type="button" class="btn btn-lg btn-light   btn-info-device  mr-1" id="devices">
                        <i class="far fa-tools icon-link"></i>
                        Configurar
                        dispositivos</button>
                    <button disabled type="button" class="btn btn-lg btn-danger  btn-red ml-1" id="stopProgram">
                        <i class="far fa-stop-circle icon-link"></i>
                        Detener programa</button>
                    <button type="button" class="btn btn-lg btn-light  btn-execute-code   ml-1"
                        id="openModalExecuteCode">
                        <i class="far fa-play-circle icon-link"></i>
                        Ejecutar programa</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Dialog - Para buscar los devices -->
    <div id="modal-devices-availables" class="modal fade" tabindex="-1" role="dialog" data-keyboard="false"
        data-backdrop="static">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Dispositivos conectados</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="renderList"></div>
                </div>
                <div class="modal-footer">
                    <button id="btnCheckDevice" type="button" class="btn btn-lg btn-light btn-device"
                        data-dismiss="modal">
                        <i class="far fa-play-circle icon-link"></i>Preparar
                        dispositivo</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Dialog - Para seleccionar el dispositivo que se quiere usar para ejecutar el programa -->
    <div id="modal-list-device-execute" class="modal fade" tabindex="-1" role="dialog" data-keyboard="false"
        data-backdrop="static">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Dispositivos conectados</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="listDevices"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-lg btn-light   btn-execute-device  mr-1"
                        id="setupDeviceExecuteCode">
                        <i class="far fa-tools icon-link"></i>Configurar
                        dispositivos</button>
                    <button type="button" class="btn btn-lg btn-light   btn-clean-board  mr-1" id="cleanCodeBoard">
                        <i class="far fa-trash-restore icon-link"></i>Reiniciar
                        dispositivo</button>
                    <button id="executeCode" type="button" class="btn btn-lg btn-light btn-execute-code"
                        data-dismiss="modal">
                        <i class="far fa-play-circle icon-link"></i>Ejecutar
                        programa</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Dialog - Configurar dispositivo -->
    <div class="modal fade" id="modal-waiting-setup-device" tabindex="-1" role="dialog" aria-hidden="true"
        data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div id="modal-header-device">
                    <h2 id="modal-title-device">
                        Configurando el dispositivo ...</h2>
                </div>
                <div id="modal-body-device">
                    <div id="loader-setup-device"></div>
                    <div class="container" id="container-waiting-device">
                        <div class="row justify-content-md-center">
                            <div class="col col-md-4">
                                <button type="button"
                                    class="btn btn-lg btn-light btn-success-custom text-center font-weight-bold"
                                    data-dismiss="modal" style="margin-bottom: 1em;">Cerrar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Dialog - Verificando programa -->
    <div class="modal fade" id="modal-waiting" tabindex="-1" role="dialog" aria-hidden="true" data-keyboard="false"
        data-backdrop="static">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div id="modal-header-device" class="mb-0">
                    <div style="text-align: center">
                        <i class="far fa-robot icon-modal"></i>
                    </div>
                    <p class="modal-title-header" id="modal-waiting-message">
                    </p>
                </div>
                <div id="modal-body-device">
                    <div id="loader-modal"></div>
                </div>
            </div>

        </div>
    </div>


    <!-- Modal Dialog - Para crear una variable -->
    <div class="modal fade" id="newVariableModal" tabindex="-1" role="dialog" aria-hidden="true" data-keyboard="false"
        data-backdrop="static">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="form-group">
                        <h3 class="modal-title mt-4 mb-4" id="exampleModalLabel">Nombre de la variable:</h3>
                        <input type="text" class="form-control" id="new-variable">
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col text-center">
                            <button type="button" class="btn  btn-lg btn-success" data-dismiss="modal">Aceptar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal Dialog - Desafío completo. -->
    <div class="modal fade" id="modal-success-all-tests" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">

                <div class="modal-header modal-header-success-challenges">
                    <div class="container">
                        <div class="row">
                            <div class="col text-center">
                                <i class="far far fa-check-circle modal-header-success-icon"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-body">
                    <div class="row  justify-content-md-center m-2">
                        <div class="col col-md-11">
                            <h5 class="display-4 modal-body-title font-weight-bold" id="successTestModalTitle">Lo
                                lograste</h5>
                            <p class="text-center h3 mt-3" id="modal-success-all-tests-message">
                            </p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="container">
                        <div class="row justify-content-md-center">
                            <div class="col">
                                <button type="button"
                                    class="btn btn-lg btn-info btn-custom-lg text-center font-weight-bold"
                                    id="open-modal-code-preview"><i class="far fa-code icon-link"></i>Código
                                    Javascript</button>
                            </div>
                            <div class="col">
                                <button type="button" class="btn btn-lg btn-success text-center font-weight-bold"
                                    data-dismiss="modal">Continuar programando</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Modal Dialog - Eliminar variable -->
    <div class="modal fade" id="modal-variable-remove" tabindex="-1" role="dialog" aria-hidden="true"
        data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header modal-header-question">
                    <div class="container">
                        <div class="row">
                            <div class="col text-center">
                                <i class="far far fa-question-circle modal-header-question-icon"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <h2 id="removeVariableTitle" class="modal-title mt-4 mb-4 text-center"></h2>
                    </div>
                </div>
                <div class="container mb-4">
                    <div class="row">
                        <div class="col text-center">
                            <button type="button" class="btn  btn-lg btn-danger" data-dismiss="modal"
                                id="cancelRemoveVariable">NO</button>
                            <button type="button" class="btn  btn-lg btn-success" data-dismiss="modal"
                                id="acceptRemoveVariable">SI</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Warning - Ver el código -->
    <div class="modal fade" id="modal-code-preview" tabindex="-1" role="dialog" aria-hidden="true" data-keyboard="false"
        data-backdrop="static">
        <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
            <div class="modal-content modal-content-code-preview">
                <div class="modal-header">
                    <div class="container">
                        <div class="row">
                            <div class="col text-left">
                                <button type="button" class="close close-rounded" data-dismiss="modal"
                                    aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="container">
                        <div class="row mb-2">
                            <div class="col-xs-6">
                                <h1 class="modal-header-code-preview  "><strong><i
                                            class="far fa-code icon-link"></i><u>Javascript</u><i
                                            class="far fa-code icon-link"></i></strong></h1>
                            </div>
                            <div class="col-xs-6">
                                <button type="button" id="copy-code-preview" class="btn btn-lg btn-light p-1 ml-3"
                                    title="Copia el código."><i class="far fa-copy icon-link"></i></button>
                                <button type="button" id="download-code-js" class="btn btn-lg btn-light p-1 ml-3"
                                    data-toggle="tooltip" data-placement="right"
                                    title="Descargar el código javascript."><i
                                        class="far fa-download icon-link"></i></button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div id="modal-body-code-preview"></div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal warning - No hay codigo para mostrar -->
    <div class="modal fade" id="modal-warning" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header modal-header-warning-code">
                    <div class="container">
                        <div class="row">
                            <div class="col text-center">
                                <i class="far far fa-surprise modal-header-warning-icon"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="row  justify-content-md-center">
                        <div class="col col-md-12">
                            <h3 class="display-4 modal-body-title mt-2">Algo salió mal</h3>
                            <p class="text-center h3 mt-3" id="modal-warning-content-message">No hay bloques
                                funcionales en tu programa. Agrega bloques funcionales y volvelo a intentar.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="container">
                        <div class="row justify-content-md-center">
                            <div class="col col-md-6 text-center ">
                                <button type="button" class="btn btn-lg btn-warning font-weight-bold"
                                    data-dismiss="modal" id="modal-warning-btn">Volvelo a
                                    intentar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Error - modal de error  -->
    <div class="modal fade" id="modal-error" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header modal-header-error-code">
                    <div class="container">
                        <div class="row">
                            <div class="col text-center">
                                <i class="far far fa-surprise modal-header-error-icon"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="row  justify-content-md-center">
                        <div class="col col-md-12">
                            <h3 class="display-4 modal-body-title mt-2" id="errorModalTitle">Algo salió mal</h3>
                            <p class="text-center h3 mt-3" id="modal-error-content-message">
                            </p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="container">
                        <div class="row justify-content-md-center">
                            <div class="col col-md-6 text-center ">
                                <button type="button" class="btn btn-lg btn-error font-weight-bold" data-dismiss="modal"
                                    id="errorModalBtn">Volvelo a
                                    intentar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Success - Este modal de exito se ve cuando es valido el codigo. -->
    <div class="modal fade" id="modal-success" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">

                <div class="modal-header modal-header-success-code">
                    <div class="container">
                        <div class="row">
                            <div class="col text-center">
                                <i class="far far fa-check-circle modal-header-success-icon"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="row  justify-content-md-center m-2">
                        <div class="col col-md-11">
                            <h5 class="display-4 modal-body-title font-weight-bold" id="successTestModalTitle">Lo
                                lograste</h5>
                            <p class="text-center h3 mt-3" id="modal-success-content-message">
                            </p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="container">
                        <div class="row justify-content-md-center">
                            <div class="col col-md-6 text-center ">
                                <button type="button"
                                    class="btn btn-lg btn-success btn-success-custom  font-weight-bold"
                                    data-dismiss="modal">Cerrar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type='text/javascript'>
        let typeToolBar = "Expert"
    </script>
    <script src="../challenges.js">
    </script>
    <script src="./expert.js">
    </script>

</body>

</html>